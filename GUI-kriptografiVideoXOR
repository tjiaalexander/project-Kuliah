//Tugas GUI Kriptografi - Implemenatasi XOR Cipher sebagai Substitution Cipher Berbasis Key pada File Video
//1. Alexander Bangkit Sugiharto Pranoto (A11.2024.16046)
//

import tkinter as tk
from tkinter import filedialog
from tkinter import messagebox

def xor_encrypt_decrypt(input_file, output_file, key):
    with open(input_file, "rb") as f:
        data = bytearray(f.read())
    print(f"Membaca file {input_file} dengan {len(data)} byte...")
    for i in range(len(data)):
        data[i] ^= key   
    with open(output_file, "wb") as f:
        f.write(data)
    print(f"File Tersimpan: {output_file}")

def pilih_file_encrypt():
    file_path = filedialog.askopenfilename(title = "Pilih Video", filetypes = [("Video Files", "*.mp4 *.avi *.mkv *.mov")])
    if file_path:
        output_file = filedialog.asksaveasfilename(defaultextension=".bin", title="Simpan Hasil Enkrispi")
        if output_file:
            xor_encrypt_decrypt(file_path, output_file, key=123)
            messagebox.showinfo("Sukses", "Video berhasil di Enkripsi!")

def pilih_file_decrypt():
    file_path = filedialog.askopenfilename(title = "Pilih File Enskripsi", filetypes = [("Video Files", "*.mp4 *.avi *.mkv *.mov")])
    if file_path:
        output_file = filedialog.asksaveasfilename(defaultextension=".mp4", title="Simpan Hasil Deskripsi")
        if output_file:
            xor_encrypt_decrypt(file_path, output_file, key=123)
            messagebox.showinfo("Sukses", "Video berhasil di Dekripsi!")

#GUI
root = tk.Tk()
root.title("XOR Video Encrypt/Decrypt")

btn_encrypt = tk.Button(root, text = "Pilih Video & Enksripsi", command=pilih_file_encrypt, width=30, height=2)
btn_encrypt.pack(pady=10)

btn_decrypt = tk.Button(root, text = "Pilih Video & Dekripsi", command=pilih_file_decrypt, width=30, height=2)
btn_decrypt.pack(pady=10)

root.mainloop()
